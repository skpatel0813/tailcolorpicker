"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/login";
exports.ids = ["pages/api/login"];
exports.modules = {

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("bcrypt");

/***/ }),

/***/ "cookie":
/*!*************************!*\
  !*** external "cookie" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("cookie");

/***/ }),

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "uuid":
/*!***********************!*\
  !*** external "uuid" ***!
  \***********************/
/***/ ((module) => {

module.exports = import("uuid");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Flogin&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Flogin.ts&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Flogin&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Flogin.ts&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_login_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/login.ts */ \"(api)/./pages/api/login.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_login_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_login_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_login_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_login_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/login\",\n        pathname: \"/api/login\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_login_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmxvZ2luJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZsb2dpbi50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUNpRDtBQUNqRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsZ0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLGdEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8/MDA5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9sb2dpbi50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCAnZGVmYXVsdCcpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgJ2NvbmZpZycpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbG9naW5cIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9sb2dpblwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Flogin&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Flogin.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/login.ts":
/*!****************************!*\
  !*** ./pages/api/login.ts ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _utils_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/db */ \"(api)/./utils/db.ts\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcrypt__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! cookie */ \"cookie\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(cookie__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _utils_session__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/session */ \"(api)/./utils/session.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_utils_session__WEBPACK_IMPORTED_MODULE_3__]);\n_utils_session__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nasync function handler(req, res) {\n    // Set CORS headers for all requests\n    res.setHeader('Access-Control-Allow-Origin', 'http://localhost:3001');\n    res.setHeader('Access-Control-Allow-Methods', 'POST, OPTIONS');\n    res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization');\n    res.setHeader('Access-Control-Allow-Credentials', 'true');\n    // Handle preflight OPTIONS request\n    if (req.method === 'OPTIONS') {\n        res.status(200).end();\n        return;\n    }\n    if (req.method === 'POST') {\n        const { username, password } = req.body;\n        if (!username || !password) {\n            return res.status(400).json({\n                error: 'Username and password are required.'\n            });\n        }\n        try {\n            const client = await _utils_db__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n            const db = client.db('your-database-name'); // Replace with your actual database name\n            const users = db.collection('users');\n            // Find the user by username\n            const user = await users.findOne({\n                username\n            });\n            if (!user) {\n                return res.status(401).json({\n                    error: 'Invalid username or password.'\n                });\n            }\n            // Verify the password\n            const isPasswordValid = await bcrypt__WEBPACK_IMPORTED_MODULE_1___default().compare(password, user.password);\n            if (!isPasswordValid) {\n                return res.status(401).json({\n                    error: 'Invalid username or password.'\n                });\n            }\n            // Generate a session ID and store it in MongoDB\n            const sessionId = (0,_utils_session__WEBPACK_IMPORTED_MODULE_3__.generateSessionId)();\n            await db.collection('sessions').insertOne({\n                sessionId,\n                username: user.username,\n                createdAt: new Date()\n            });\n            // Set the session cookie and username cookie\n            res.setHeader('Set-Cookie', [\n                (0,cookie__WEBPACK_IMPORTED_MODULE_2__.serialize)('sessionId', sessionId, {\n                    httpOnly: true,\n                    secure: \"development\" === 'production',\n                    sameSite: 'Lax',\n                    path: '/',\n                    maxAge: 60 * 60 * 24 * 365\n                }),\n                (0,cookie__WEBPACK_IMPORTED_MODULE_2__.serialize)('username', username, {\n                    httpOnly: true,\n                    secure: \"development\" === 'production',\n                    sameSite: 'Lax',\n                    path: '/',\n                    maxAge: 60 * 60 * 24 * 365\n                })\n            ]);\n            return res.status(200).json({\n                message: 'Login successful.'\n            });\n        } catch (error) {\n            console.error('Error during login:', error);\n            return res.status(500).json({\n                error: 'Internal server error.'\n            });\n        }\n    } else {\n        res.setHeader('Allow', [\n            'POST',\n            'OPTIONS'\n        ]);\n        res.status(405).end(`Method ${req.method} Not Allowed`);\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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InNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcclxuaW1wb3J0IGNsaWVudFByb21pc2UgZnJvbSAnLi4vLi4vdXRpbHMvZGInO1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XHJcbmltcG9ydCB7IHNlcmlhbGl6ZSB9IGZyb20gJ2Nvb2tpZSc7XHJcbmltcG9ydCB7IGdlbmVyYXRlU2Vzc2lvbklkIH0gZnJvbSAnLi4vLi4vdXRpbHMvc2Vzc2lvbic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgLy8gU2V0IENPUlMgaGVhZGVycyBmb3IgYWxsIHJlcXVlc3RzXHJcbiAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMScpO1xyXG4gIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnUE9TVCwgT1BUSU9OUycpO1xyXG4gIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnQ29udGVudC1UeXBlLCBBdXRob3JpemF0aW9uJyk7XHJcbiAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHMnLCAndHJ1ZScpO1xyXG5cclxuICAvLyBIYW5kbGUgcHJlZmxpZ2h0IE9QVElPTlMgcmVxdWVzdFxyXG4gIGlmIChyZXEubWV0aG9kID09PSAnT1BUSU9OUycpIHtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5lbmQoKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcclxuICAgIGNvbnN0IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0gPSByZXEuYm9keTtcclxuICAgIGlmICghdXNlcm5hbWUgfHwgIXBhc3N3b3JkKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnVXNlcm5hbWUgYW5kIHBhc3N3b3JkIGFyZSByZXF1aXJlZC4nIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IGNsaWVudFByb21pc2U7XHJcbiAgICAgIGNvbnN0IGRiID0gY2xpZW50LmRiKCd5b3VyLWRhdGFiYXNlLW5hbWUnKTsgLy8gUmVwbGFjZSB3aXRoIHlvdXIgYWN0dWFsIGRhdGFiYXNlIG5hbWVcclxuICAgICAgY29uc3QgdXNlcnMgPSBkYi5jb2xsZWN0aW9uKCd1c2VycycpO1xyXG5cclxuICAgICAgLy8gRmluZCB0aGUgdXNlciBieSB1c2VybmFtZVxyXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgdXNlcnMuZmluZE9uZSh7IHVzZXJuYW1lIH0pO1xyXG4gICAgICBpZiAoIXVzZXIpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgdXNlcm5hbWUgb3IgcGFzc3dvcmQuJyB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVmVyaWZ5IHRoZSBwYXNzd29yZFxyXG4gICAgICBjb25zdCBpc1Bhc3N3b3JkVmFsaWQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5wYXNzd29yZCk7XHJcbiAgICAgIGlmICghaXNQYXNzd29yZFZhbGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHVzZXJuYW1lIG9yIHBhc3N3b3JkLicgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEdlbmVyYXRlIGEgc2Vzc2lvbiBJRCBhbmQgc3RvcmUgaXQgaW4gTW9uZ29EQlxyXG4gICAgICBjb25zdCBzZXNzaW9uSWQgPSBnZW5lcmF0ZVNlc3Npb25JZCgpO1xyXG4gICAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKCdzZXNzaW9ucycpLmluc2VydE9uZSh7XHJcbiAgICAgICAgc2Vzc2lvbklkLFxyXG4gICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxyXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBTZXQgdGhlIHNlc3Npb24gY29va2llIGFuZCB1c2VybmFtZSBjb29raWVcclxuICAgICAgcmVzLnNldEhlYWRlcignU2V0LUNvb2tpZScsIFtcclxuICAgICAgICBzZXJpYWxpemUoJ3Nlc3Npb25JZCcsIHNlc3Npb25JZCwge1xyXG4gICAgICAgICAgaHR0cE9ubHk6IHRydWUsXHJcbiAgICAgICAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsXHJcbiAgICAgICAgICBzYW1lU2l0ZTogJ0xheCcsXHJcbiAgICAgICAgICBwYXRoOiAnLycsXHJcbiAgICAgICAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDM2NSwgLy8gMSB5ZWFyIGNvb2tpZSBleHBpcnlcclxuICAgICAgICB9KSxcclxuICAgICAgICBzZXJpYWxpemUoJ3VzZXJuYW1lJywgdXNlcm5hbWUsIHtcclxuICAgICAgICAgIGh0dHBPbmx5OiB0cnVlLFxyXG4gICAgICAgICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxyXG4gICAgICAgICAgc2FtZVNpdGU6ICdMYXgnLFxyXG4gICAgICAgICAgcGF0aDogJy8nLFxyXG4gICAgICAgICAgbWF4QWdlOiA2MCAqIDYwICogMjQgKiAzNjUsIC8vIDEgeWVhciBjb29raWUgZXhwaXJ5XHJcbiAgICAgICAgfSksXHJcbiAgICAgIF0pO1xyXG5cclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgbWVzc2FnZTogJ0xvZ2luIHN1Y2Nlc3NmdWwuJyB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGR1cmluZyBsb2dpbjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yLicgfSk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlcy5zZXRIZWFkZXIoJ0FsbG93JywgWydQT1NUJywgJ09QVElPTlMnXSk7XHJcbiAgICByZXMuc3RhdHVzKDQwNSkuZW5kKGBNZXRob2QgJHtyZXEubWV0aG9kfSBOb3QgQWxsb3dlZGApO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiY2xpZW50UHJvbWlzZSIsImJjcnlwdCIsInNlcmlhbGl6ZSIsImdlbmVyYXRlU2Vzc2lvbklkIiwiaGFuZGxlciIsInJlcSIsInJlcyIsInNldEhlYWRlciIsIm1ldGhvZCIsInN0YXR1cyIsImVuZCIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJib2R5IiwianNvbiIsImVycm9yIiwiY2xpZW50IiwiZGIiLCJ1c2VycyIsImNvbGxlY3Rpb24iLCJ1c2VyIiwiZmluZE9uZSIsImlzUGFzc3dvcmRWYWxpZCIsImNvbXBhcmUiLCJzZXNzaW9uSWQiLCJpbnNlcnRPbmUiLCJjcmVhdGVkQXQiLCJEYXRlIiwiaHR0cE9ubHkiLCJzZWN1cmUiLCJwcm9jZXNzIiwic2FtZVNpdGUiLCJwYXRoIiwibWF4QWdlIiwibWVzc2FnZSIsImNvbnNvbGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/login.ts\n");

/***/ }),

/***/ "(api)/./utils/db.ts":
/*!*********************!*\
  !*** ./utils/db.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nconst uri = process.env.MONGODB_URI;\nconst options = {};\nlet client;\nlet clientPromise;\nif (!process.env.MONGODB_URI) {\n    throw new Error('Please add your Mongo URI to .env.local');\n}\nif (true) {\n    if (!global._mongoClientPromise) {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n        global._mongoClientPromise = client.connect();\n    }\n    clientPromise = global._mongoClientPromise;\n} else {}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clientPromise);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi91dGlscy9kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0M7QUFFdEMsTUFBTUMsTUFBTUMsUUFBUUMsR0FBRyxDQUFDQyxXQUFXO0FBQ25DLE1BQU1DLFVBQVUsQ0FBQztBQUVqQixJQUFJQztBQUNKLElBQUlDO0FBRUosSUFBSSxDQUFDTCxRQUFRQyxHQUFHLENBQUNDLFdBQVcsRUFBRTtJQUM1QixNQUFNLElBQUlJLE1BQU07QUFDbEI7QUFFQSxJQUFJTixJQUFzQyxFQUFFO0lBQzFDLElBQUksQ0FBQ08sT0FBT0MsbUJBQW1CLEVBQUU7UUFDL0JKLFNBQVMsSUFBSU4sZ0RBQVdBLENBQUNDLEtBQUtJO1FBQzlCSSxPQUFPQyxtQkFBbUIsR0FBR0osT0FBT0ssT0FBTztJQUM3QztJQUNBSixnQkFBZ0JFLE9BQU9DLG1CQUFtQjtBQUM1QyxPQUFPLEVBR047QUFFRCxpRUFBZUgsYUFBYUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3V0aWxzL2RiLnRzP2NkN2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9uZ29DbGllbnQgfSBmcm9tICdtb25nb2RiJztcclxuXHJcbmNvbnN0IHVyaSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIGFzIHN0cmluZztcclxuY29uc3Qgb3B0aW9ucyA9IHt9O1xyXG5cclxubGV0IGNsaWVudDtcclxubGV0IGNsaWVudFByb21pc2U6IFByb21pc2U8TW9uZ29DbGllbnQ+O1xyXG5cclxuaWYgKCFwcm9jZXNzLmVudi5NT05HT0RCX1VSSSkge1xyXG4gIHRocm93IG5ldyBFcnJvcignUGxlYXNlIGFkZCB5b3VyIE1vbmdvIFVSSSB0byAuZW52LmxvY2FsJyk7XHJcbn1cclxuXHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gIGlmICghZ2xvYmFsLl9tb25nb0NsaWVudFByb21pc2UpIHtcclxuICAgIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmksIG9wdGlvbnMpO1xyXG4gICAgZ2xvYmFsLl9tb25nb0NsaWVudFByb21pc2UgPSBjbGllbnQuY29ubmVjdCgpO1xyXG4gIH1cclxuICBjbGllbnRQcm9taXNlID0gZ2xvYmFsLl9tb25nb0NsaWVudFByb21pc2U7XHJcbn0gZWxzZSB7XHJcbiAgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KHVyaSwgb3B0aW9ucyk7XHJcbiAgY2xpZW50UHJvbWlzZSA9IGNsaWVudC5jb25uZWN0KCk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsaWVudFByb21pc2U7XHJcbiJdLCJuYW1lcyI6WyJNb25nb0NsaWVudCIsInVyaSIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1VSSSIsIm9wdGlvbnMiLCJjbGllbnQiLCJjbGllbnRQcm9taXNlIiwiRXJyb3IiLCJnbG9iYWwiLCJfbW9uZ29DbGllbnRQcm9taXNlIiwiY29ubmVjdCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./utils/db.ts\n");

/***/ }),

/***/ "(api)/./utils/session.ts":
/*!**************************!*\
  !*** ./utils/session.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSessionCookie: () => (/* binding */ createSessionCookie),\n/* harmony export */   generateSessionId: () => (/* binding */ generateSessionId)\n/* harmony export */ });\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cookie */ \"cookie\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cookie__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"uuid\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([uuid__WEBPACK_IMPORTED_MODULE_1__]);\nuuid__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// Helper function to generate a new session ID\nfunction generateSessionId() {\n    return (0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)();\n}\n// Function to create the session cookie\nfunction createSessionCookie(sessionId) {\n    const options = {\n        maxAge: 60 * 60 * 24 * 365,\n        httpOnly: true,\n        secure: \"development\" === 'production',\n        path: '/',\n        sameSite: 'lax'\n    };\n    return (0,cookie__WEBPACK_IMPORTED_MODULE_0__.serialize)('sessionId', sessionId, options); // Session cookie named 'sessionId'\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi91dGlscy9zZXNzaW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQW1DO0FBQ0M7QUFFcEMsK0NBQStDO0FBQ3hDLFNBQVNHO0lBQ2QsT0FBT0Qsd0NBQU1BO0FBQ2Y7QUFFQSx3Q0FBd0M7QUFDakMsU0FBU0Usb0JBQW9CQyxTQUFpQjtJQUNuRCxNQUFNQyxVQUFVO1FBQ2RDLFFBQVEsS0FBSyxLQUFLLEtBQUs7UUFDdkJDLFVBQVU7UUFDVkMsUUFBUUMsa0JBQXlCO1FBQ2pDQyxNQUFNO1FBQ05DLFVBQVU7SUFDWjtJQUVBLE9BQU9aLGlEQUFTQSxDQUFDLGFBQWFLLFdBQVdDLFVBQVUsbUNBQW1DO0FBQ3hGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vdXRpbHMvc2Vzc2lvbi50cz9mYzNlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNlcmlhbGl6ZSB9IGZyb20gJ2Nvb2tpZSc7XHJcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIGEgbmV3IHNlc3Npb24gSURcclxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlU2Vzc2lvbklkKCkge1xyXG4gIHJldHVybiB1dWlkdjQoKTtcclxufVxyXG5cclxuLy8gRnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBzZXNzaW9uIGNvb2tpZVxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2Vzc2lvbkNvb2tpZShzZXNzaW9uSWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDM2NSwgLy8gMSB5ZWFyIGluIHNlY29uZHNcclxuICAgIGh0dHBPbmx5OiB0cnVlLCAvLyBDYW4ndCBiZSBhY2Nlc3NlZCBieSBKYXZhU2NyaXB0XHJcbiAgICBzZWN1cmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicsIC8vIFVzZSBzZWN1cmUgY29va2llcyBpbiBwcm9kdWN0aW9uXHJcbiAgICBwYXRoOiAnLycsIC8vIEF2YWlsYWJsZSB0aHJvdWdob3V0IHRoZSBzaXRlXHJcbiAgICBzYW1lU2l0ZTogJ2xheCcsIC8vIFByZXZlbnRzIENTUkYgYXR0YWNrc1xyXG4gIH07XHJcblxyXG4gIHJldHVybiBzZXJpYWxpemUoJ3Nlc3Npb25JZCcsIHNlc3Npb25JZCwgb3B0aW9ucyk7IC8vIFNlc3Npb24gY29va2llIG5hbWVkICdzZXNzaW9uSWQnXHJcbn1cclxuIl0sIm5hbWVzIjpbInNlcmlhbGl6ZSIsInY0IiwidXVpZHY0IiwiZ2VuZXJhdGVTZXNzaW9uSWQiLCJjcmVhdGVTZXNzaW9uQ29va2llIiwic2Vzc2lvbklkIiwib3B0aW9ucyIsIm1heEFnZSIsImh0dHBPbmx5Iiwic2VjdXJlIiwicHJvY2VzcyIsInBhdGgiLCJzYW1lU2l0ZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./utils/session.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Flogin&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Flogin.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();